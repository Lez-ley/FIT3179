{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "Where do Malaysians earn the most? Household income by state in 2022",
    "align": "center",
    "fontSize": 18
  },
  "width": 650,
  "height": 450,
  "projection": {"type": "mercator", "center": [109.5, 4], "scale": 1800},
  "layer":[
    {
        "data": {
        "url": "ne_110m_ocean.json",
        "format": {"type": "topojson", "feature": "ne_110m_ocean"}
        },
        "mark": {"type": "geoshape", "fill": "lightblue"}
    },
    {
        "data": {
        "url": "ne_110m_graticules_5.json",
        "format": {"type": "topojson", "feature": "ne_110m_graticules_5"}
        },
        "mark": {"type": "geoshape", "fill": null, "stroke": "white"}
    },
    {
        "data": {
        "url": "https://raw.githubusercontent.com/Lez-ley/FIT3179/main/Visualization2/malaysia_map.json",
        "format": {"type": "topojson", "feature": "my"}
        },
        "transform": [
            {
                "lookup": "properties.name",
                "from": {
                    "data": {
                        "url": "https://raw.githubusercontent.com/Lez-ley/FIT3179/main/week9_homework/hh_income_state.csv","format": {"type": "csv"}},
                    "key": "state",
                    "fields": ["date", "income_mean", "income_median"]
                }
            }
        ],
        "mark": {"type": "geoshape", "stroke": "black", "strokeWidth": 0.5},
        "encoding": {
            "color": {
                "field": "income_mean",
                "type": "quantitative",
                "scale": {
                    "range": ["#ffffcc", "#c7e9b4", "#7fcdbb", "#41b6c4", "#1d91c0", "#225ea8", "#0c2c84"],
                    "type": "quantile"
                },
                "legend": {
                    "title": "Mean Income (RM)",

                    "orient": "none",
                    "legendX": 545,
                    "legendY": 227,
                    "direction": "vertical",

                    "titleAnchor": "end",
                    "labelOverlap": "greedy",

                    "labelOffset": -45
                }
            },
            "tooltip": [
                {"field": "properties.name", "type": "nominal", "title": "State"},
                {"field": "income_mean", "type": "quantitative", "title": "Mean Income (RM)"},
                {"field": "income_median", "type": "quantitative", "title": "Median Income (RM)"}
            ]
        }
    }]
}